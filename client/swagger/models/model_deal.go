// Code generated by go-swagger; DO NOT EDIT.

package models

// This file was generated by the swagger tool.
// Editing this file might prove futile when you re-run the swagger generate command

import (
	"context"
	stderrors "errors"

	"github.com/go-openapi/errors"
	"github.com/go-openapi/strfmt"
	"github.com/go-openapi/swag"
)

// ModelDeal model deal
//
// swagger:model model.Deal
type ModelDeal struct {

	// client Id
	ClientID string `json:"clientId,omitempty"`

	// created at
	CreatedAt string `json:"createdAt,omitempty"`

	// deal Id
	DealID int64 `json:"dealId,omitempty"`

	// deal type
	DealType ModelDealType `json:"dealType,omitempty"`

	// end epoch
	EndEpoch int64 `json:"endEpoch,omitempty"`

	// error message
	ErrorMessage string `json:"errorMessage,omitempty"`

	// id
	ID int64 `json:"id,omitempty"`

	// label
	Label string `json:"label,omitempty"`

	// LastVerifiedAt is the last time the deal was verified as active by the tracker
	LastVerifiedAt string `json:"lastVerifiedAt,omitempty"`

	// NextChallengeEpoch is the next epoch when a challenge proof is due
	NextChallengeEpoch int64 `json:"nextChallengeEpoch,omitempty"`

	// piece cid
	PieceCid string `json:"pieceCid,omitempty"`

	// piece size
	PieceSize int64 `json:"pieceSize,omitempty"`

	// price
	Price string `json:"price,omitempty"`

	// PDP-specific fields (only populated for DealTypePDP)
	ProofSetID int64 `json:"proofSetId,omitempty"`

	// ProofSetLive indicates if the proof set is live (actively being challenged)
	ProofSetLive bool `json:"proofSetLive,omitempty"`

	// proposal Id
	ProposalID string `json:"proposalId,omitempty"`

	// provider
	Provider string `json:"provider,omitempty"`

	// Associations
	ScheduleID int64 `json:"scheduleId,omitempty"`

	// sector start epoch
	SectorStartEpoch int64 `json:"sectorStartEpoch,omitempty"`

	// start epoch
	StartEpoch int64 `json:"startEpoch,omitempty"`

	// state
	State ModelDealState `json:"state,omitempty"`

	// updated at
	UpdatedAt string `json:"updatedAt,omitempty"`

	// verified
	Verified bool `json:"verified,omitempty"`
}

// Validate validates this model deal
func (m *ModelDeal) Validate(formats strfmt.Registry) error {
	var res []error

	if err := m.validateDealType(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateState(formats); err != nil {
		res = append(res, err)
	}

	if len(res) > 0 {
		return errors.CompositeValidationError(res...)
	}
	return nil
}

func (m *ModelDeal) validateDealType(formats strfmt.Registry) error {
	if swag.IsZero(m.DealType) { // not required
		return nil
	}

	if err := m.DealType.Validate(formats); err != nil {
		ve := new(errors.Validation)
		if stderrors.As(err, &ve) {
			return ve.ValidateName("dealType")
		}
		ce := new(errors.CompositeError)
		if stderrors.As(err, &ce) {
			return ce.ValidateName("dealType")
		}

		return err
	}

	return nil
}

func (m *ModelDeal) validateState(formats strfmt.Registry) error {
	if swag.IsZero(m.State) { // not required
		return nil
	}

	if err := m.State.Validate(formats); err != nil {
		ve := new(errors.Validation)
		if stderrors.As(err, &ve) {
			return ve.ValidateName("state")
		}
		ce := new(errors.CompositeError)
		if stderrors.As(err, &ce) {
			return ce.ValidateName("state")
		}

		return err
	}

	return nil
}

// ContextValidate validate this model deal based on the context it is used
func (m *ModelDeal) ContextValidate(ctx context.Context, formats strfmt.Registry) error {
	var res []error

	if err := m.contextValidateDealType(ctx, formats); err != nil {
		res = append(res, err)
	}

	if err := m.contextValidateState(ctx, formats); err != nil {
		res = append(res, err)
	}

	if len(res) > 0 {
		return errors.CompositeValidationError(res...)
	}
	return nil
}

func (m *ModelDeal) contextValidateDealType(ctx context.Context, formats strfmt.Registry) error {

	if swag.IsZero(m.DealType) { // not required
		return nil
	}

	if err := m.DealType.ContextValidate(ctx, formats); err != nil {
		ve := new(errors.Validation)
		if stderrors.As(err, &ve) {
			return ve.ValidateName("dealType")
		}
		ce := new(errors.CompositeError)
		if stderrors.As(err, &ce) {
			return ce.ValidateName("dealType")
		}

		return err
	}

	return nil
}

func (m *ModelDeal) contextValidateState(ctx context.Context, formats strfmt.Registry) error {

	if swag.IsZero(m.State) { // not required
		return nil
	}

	if err := m.State.ContextValidate(ctx, formats); err != nil {
		ve := new(errors.Validation)
		if stderrors.As(err, &ve) {
			return ve.ValidateName("state")
		}
		ce := new(errors.CompositeError)
		if stderrors.As(err, &ce) {
			return ce.ValidateName("state")
		}

		return err
	}

	return nil
}

// MarshalBinary interface implementation
func (m *ModelDeal) MarshalBinary() ([]byte, error) {
	if m == nil {
		return nil, nil
	}
	return swag.WriteJSON(m)
}

// UnmarshalBinary interface implementation
func (m *ModelDeal) UnmarshalBinary(b []byte) error {
	var res ModelDeal
	if err := swag.ReadJSON(b, &res); err != nil {
		return err
	}
	*m = res
	return nil
}
